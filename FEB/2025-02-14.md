## 날짜: 2025-02-14

### 스크럼

- 학습 목표 1 : 설계 + CAP 이론 강의 듣기

### 새로 배운 내용

#### 주제 1: 설계

- 기획:<br>
  프로젝트를 누가 쓸 건지<br>
  준수해야 하는 룰(ex. 사용자 문의 페이지 같은 경우는 익명도 가능하다, 결제할 때는 반드시 로그인을 해야한다)을 문서화

- 기술:<br>
  본인의 손에 많은 선택지를 쥐고 있어야 함

- 근거 마련:<br>
  카톡의 펑 기능을 구현한다고 칠 때<br>
  사용자의 수: 약 4천만 명<br>
  이미지 파일 크기: 이미지 하나당 10kb<br>
  볼 수 있는 사람의 수: 70명<br>
  데이터 유지 기간: 하루<br>
  펑 보관하는 장소: 로컬 or 서버<br>
  &emsp;로컬에 저장한다면 상관없지만<br>
  &emsp;서버에 저장한다면 서버 용량 확인

  1.  하루에 몇 명의 유저가 펑을 이용할 것인가
  2.  이 유저들 중 20%를 충성 유저로 고려한다
  3.  전체 발생 용량은 최대 4천만명의 유저중 60%로 가정
  4.  24,000,000명의 유저가 서비스 초기 하루 한번은 이용한다고 가정
  5.  10kbyte \* 240,000,000
  6.  보관하는 유저는 10%
  7.  2.8GB \* 365일

- 면접 볼 때 회사에 질문 하면 좋은 것
  회사의 유저 트래픽은 얼마인가요<br>
  그러면 서버용량은 어떻게 되나요<br>
  그럼 캐싱이 되고 있겠죠

- 공부 방법<br>

  - 프론트<br>
    네이버 fe news 들어가면 github이 있는데 가장 손쉽게 최신 소식 들을 수 있음<br>
    토스가 프론트엔드의 성지 - 잘 관리 되고 있음<br>
    코드를 더 잘 짜고 싶으몀 토스 코드 분석해보면 되고 컴포넌트 어떻게 짜여져있는 지 분석<br>

  - 백<br>
    백엔드는 인프라가 어떻게 구성되어야 할 지<br>
    전체적인 인프라가 보일 때까지<br>
    예를 들어 자바로 짠다고 하면 인터페이스 기준으로 메소드 이어보기<br>
    데베 기준으로 erd를 쭉 짜보기<br>
    어떻게 내가 배포를 할 지 - 블루,그린으로 하면 어떻게 할거고 서브 도메인 어찌 할지, 로드밸런서는 어떻게 할 지

- mysql 하나로 모든 걸 구현할 수가 있나?

  이제는 yes, 과거는 no였다<br>
  특징을 알아야 함 <br>
  ex) 관계형이고, 최적화도 가능, ACID 준수 등등

- db에 대해 알아보자
  어떤 db가 있고
  - 그래도 대중성이 있는 것을 사용하자
  - 내가 쓸 언어를 지원하는 지

#### 주제 2: CAP 이론

- CAP 이론<br>
  분산 시스템 세 가지 조건 만족하는 분산 시스템이 존재하지 않는다<br>
  위 세가지좀 두 가지만 보장한다는 것

- C 일관성<br>
  어떤 노드가 요청을 보내도 똑같은 값을 보내주는 것<br>
  일관성 선택하면 언제나 항상 최신화 된 데이터 보장<br>
  그래서 가용성 부분에 trade-off 가 발생할 수 밖에

- A 가용성<br>
  응답을 항상 해줌<br>
  그래서 옛날 버전을 가진 노드에게 요청이 와도 그대로 보냄

- P 파티션 허용<br>
  만약 네트워크가 끊겨도 (파티션이 생겨도) 굴러가게

- 일관성 vs 가용성<br>

  일관성을 보장하고 싶어도 업데이트칠께 해도 네트워크 파티션이 있으면 계속 대기

  - 일관성을 선택하는 경우<br>
    파티션이 생기면 무한 대기<br>
    근데 일관성이 보장 됨<br>
    은행 업무 같은 경우는 일관성을 선택해야함<br>

  - 가용성을 선택하는 경우<br>
    a node 가 업데이트 돼서 b node 에 업데이트 요청<br>
    c node에게 요청했지만 응답 없어도 넘어감<br>
    그럼 c node에 요청한 사람은 다른 데이터를 받는 것

  상황에 맞춰서 선택해야함

  ex) 은행 업무<br>

  - 일관성 선택한 경우<br>
    네트워크 장애로 입금 무한 대기

  - 가용성 선택한 경우<br>
    네트워크 장애로 다른 atm은 입금 된 지 모름<br>
    이 상황일 때 고객은 둘 atm에 가서 둘다 출금 가능<br>
    파티션 해결되면 잔액은 -5가 되어버림

### 오늘의 회고

- 오늘 실습을 진행하면서 많이 얻어갈 수 있었다
- 한 번씩 이렇게 클론 코딩을 하면서 직접 설계 해 보는 것이 좋겠다

### 참고 자료 및 링크

- [Naver fe-news](https://github.com/naver/fe-news)
- [Toss fe](https://github.com/toss/overlay-kit)
- [DB Engines](https://db-engines.com/en/ranking)
- [Jeff 교재](https://www.notion.so/ej31/149954dac75580dca253e4f87d3bee89?v=199954dac75580719777000cfa00a58d)
