## 오늘 내가 배운 것들(Today I Learned)

### 1. nginx 설정하면 백엔드 경로 상대 경로 가능

**문제 상황:**
docker로 인스턴스를 구성하려고 하는데
ecr에 올린 이미지로 docker-compose를 구성하려고 했음.
하지만, 인스턴스가 달라질 때마다 ip 주소가 변하니 프론트에서 서버 url을 변경해줘야 했음.
그러면 이미지도 다시 올려야 하는 문제!
그래서 방법이 없을 까 했는데

**해결 방안:**
이미 nginx 설정을 해놓은 상태라
절대 주소가 아닌 상대 주소인 /api/로만 요청을 해도 알아서 백엔드로 들어간다고 함!
nginx에서 설정을 했기 때문에

```javascript
    ## 기존
    export const SERVER_URL = 'http:43.233.32.23/api/';

    ## 변경 후
    export const SERVER_URL = '/api/';
```

이렇게만 해도 됨!

**결과:**
인스턴스가 바뀌어도 프론트가 바뀌지 않아도 됨!
서버 url이 nginx 설정때문에 알아서 백엔드로 들어감

---

### 2. XSS 공격의 원인 - innerHTML

**문제 상황:**
xss 공격에 무방비
입력을 넣으면 그대로 나오는 것이 아닌 html이 반영되어서 나옴.
모든 곳에 그런 것은 아니고 중복된 요소에만 그럼

**해결 방안:**
원인은 InnerHTML이었음.
보통 중복된 요소는 서버에서 주는 요소의 개소에 따라 나오게 설정한 것이라,
innerHTML을 넣어서 코드를 작성했는데
이게 XSS 공격이 쉽게 한다고 함.
innerHTML 대신 textContent, appendChild를 이용해서 코드 작성

**결과:**
입력의 결과가 그대로 나옴
대신, 코드의 길이는 매우 길어졌다
